<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/static/css/style.css">
    <title>Rent Property</title>
</head>
<body>
    <nav><a href="/">Back Home</a></nav>
    <div class="container">
        <h2>Rent Property</h2>
        <form action="/add_customer" method="POST">
            <input type="text" name="cname" placeholder="Customer Name" required>
            <input type="text" name="contact" placeholder="Contact Number" required>
            
            <label for="billing_date">Billing Date:</label>
            <input type="date" name="billing_date" id="billing_date" required>
            
            <select name="property_id" id="propSelect" required>
                <option value="">-- Select Available Property --</option>
            </select>
            <button type="submit">Assign Tenant</button>
        </form>
    </div>

    <script>
        // Fetch properties where status is 'Available'
        fetch('/api/available')
            .then(res => res.json())
            .then(data => {
                const select = document.getElementById('propSelect');
                data.forEach(p => { 
                    // p[0] is Property ID, p[1] is Property Name
                    select.innerHTML += `<option value="${p[0]}">${p[1]}</option>`; 
                });
            })
            .catch(err => console.error("Error loading properties:", err));

        // Auto-set today's date on load for convenience
        document.getElementById('billing_date').valueAsDate = new Date();
    </script>
    
    <footer><p>Build by XYZ</p></footer>
</body>
</html>